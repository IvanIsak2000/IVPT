# Интерактивная периодическая таблица химических элементов
# План проекта
## База данных
Необходимо сделать несколько классов, которые будут обеспечивать работу с базой данных.
Весь код, связаный с БД, будет лежать в каталоге src/database.
Будет использоваться sqlite3.
Модуль для работы с ней включён в стандартную библиотеку python с версии 2.5, поэтому она не потянет  
за собой лишние зависимости.

Таблицы:
```SQL
CREATE TABLE IF NOT EXISTS basic_info (
	number			INTEGER	UNSIGNED	NOT NULL,
	abbreviation	TEXT	UNIQUE		NOT NULL,
		CONSTRAINT number_pk
			PRIMARY KEY (number));
```
```SQL
CREATE TABLE IF NOT EXISTS basic_params (
	number	INTEGER UNSIGNED UNIQUE NOT NULL,
	name	TEXT			 UNIQUE NOT NULL,
	weight	REAL					NOT NULL,
	grp		TEXT,
	period  INTEGER UNSIGNED,
		CONSTRAINT fk_element_number
			FOREIGN KEY (number)
			REFERENCES basic_info(number));
```
```SQL
CREATE TABLE IF NOT EXISTS congregation (
	number		  INTEGER UNSIGNED UNIQUE NOT NULL,
	metal		  INTEGER UNSIGNED DEFAULT 0,
	amphoteric	  INTEGER UNSIGNED DEFAULT 0,
	energy_levels INTEGER UNSIGNED,
	gas			  INTEGER UNSIGNED DEFAULT 0,
	semiconductor INTEGER UNSIGNED DEFAULT 0,
		CONSTRAINT fk_element_number
			FOREIGN KEY (number)
			REFERENCES basic_info(number));
```
```SQL
CREATE TABLE IF NOT EXISTS links (
	number	  INTEGER,
	wiki_link TEXT
		CONSTRAINT fk_element_number
			FOREIGN KEY (number)
			REFERENCES basic_info(number));
```
~~И ещё две таблицы с переводами~~
~~(одна - для перевода названий елементов, другая - для всего остального)~~

*не будет реализовано*

## Интерфейс

Будет одно основное окно таблицы.
При нажатии на элемент будет открываться окно с информацией по нему.

# Структура

## БД

### Класс подключния к базе данных
От него будут наследоваться классы, обеспечивающие выполнение запросов SQL (`select`, `insert` и так далее)

### Тесты для БД
Будет использоваться фреймворк unittest. Он встроен в Python с версии 2.1

### ~~Парсер для получения информации о хим. элементах из интернета.~~
~~Будет использована библиотека Beautiful Soup со встроенным в python парсером html-документов.~~
~~Также, модуль requests для получения страницы~~

Парсинг данных из интернета занимает много времени.
Поэтому будет использоваться библиотека `periodictable`.
Из неё можно получить всю нужную информацию для базы данных.
При каждом запуске будет проверяться существование и целостность файла БД.
При выявлении проблем база данных будет пересоздана.
Это обеспечивает целостность данных.

*Однако, самый первый старт программы будет занимать некоторое время - вплоть до минуты с hard disk drive (с SSD меньше).*
*Зато все последующие запуски происходят без задержек*

## Интерфейс
### Класс окна основного окна
При инициализации в нём будет отрисовываться таблица с элементами.
Будут видны только номер элемента и его обозначение.
Нажатие на элемент будет создавать окно элемента.
~~Внизу окна будет кнопка для добавления нового элемента.~~
~~Нажатие на неё будет создавать окно `NewElementWindow`~~

_не будет реализовано_

#### Элемент интерфейса для смены языка

_второстепенная задача. Скорее всего, не будет реализовано до даты сдачи проекта_

#### ~~Кнопка сброса базы данных (и закрытия программы)~~

_не будет реализовано_

#### Функционал для проведения стехиометрических расчётов

_второстепенная задача. Скорее всего, не будет реализовано до даты сдачи проекта_

 Информация о языке будет храниться в файле `~/IVPT/lang.toml`

### Класс окна элемента `ElementWindow`

В нём будет отображена подробная информация об элементе (полное название, группа, период, атомная 
масса, принадлежность к металлам / неметаллам, группа элемента по ~~электронным~~ энергетическим 
уровням и т.д.), ссылка на статью в интернете.

~~Так же, здесь можно будет удалть элемент~~

_не будет реализовано_

### Окно, обрабатывающее исключения

_второстепенная задача. Скорее всего, не будет реализовано до даты сдачи проекта_

### ~~Окно добавления нового элемента `NewElementWindow`.~~
~~Можно будет указать подробные параметры (см. пункт про `ElementWindow`).~~
~~Они будут разделены по группам чтобы избежать лишних запросов к БД~~
~~(например, если не было указано ни одного параметра для таблицы `congregation`)~~

_не будет реализовано_

## Получение данных
Для получения пути к базе данных и сопутствующей информации  будет использоваться файл 
`~/IVPT/config.toml`.
В программе будет жёстко определён путь к `config.toml`.
Остальные пути можно будет настроить в самом файле
```ascii
IVPT
├── README.md
├── requirements.txt
├── runtime.txt
├── src
│   ├── config.py
│   ├── database
│   │   ├── base.py
│   │   ├── chemistry.py
│   │   ├── create_table.py
│   │   ├── __init__.py
│   │   ├── insert.py
│   │   └── select.py
│   ├── default_config.toml
│   ├── elements
│   │   ├── basic.py
│   │   ├── elements.py
│   │   └── __init__.py
│   ├── errors_handler.py
│   ├── __init__.py
│   ├── interfaces
│   │   ├── element_window.py
│   │   ├── hyper_link_label.py
│   │   ├── __init__.py
│   │   └── main_window.py
│   ├── log.py
│   └── main.py
└── tests
    └── test_database_insert.py
```
IVPT = interactive visual periodic table, название проекта

------

Sat 5 Nov 2022 14:11:32 PM MSK
